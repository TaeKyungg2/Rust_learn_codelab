### 한 번에 하나의 스레드만 데이터에 접근할 수 있도록 Mutex 사용하기

_Mutex_는 _mutual exclusion_의 약자로, mutex는 특정 시점에 하나의 스레드만 데이터에 접근할 수 있도록 허용합니다. mutex 안의 데이터에 접근하려면, 스레드는 먼저 mutex의 _lock_을 요청하여 접근 권한을 얻어야 합니다. 락(lock)은 현재 누가 데이터에 독점적으로 접근하고 있는지를 추적하는 mutex의 일부 데이터 구조입니다. 따라서 mutex는 락 시스템을 통해 자신이 보유한 데이터를 _보호하고(guarding)_ 있다고 설명됩니다.

Mutex는 사용하기 어렵다는 평판을 가지고 있습니다. 이는 다음 두 가지 규칙을 기억해야 하기 때문입니다:

* 데이터를 사용하기 전에 락을 시도해서 획득해야 합니다.
* mutex가 보호하는 데이터를 다 사용한 뒤에는 데이터를 언락(unlock)하여 다른 스레드가 락을 획득할 수 있도록 해야 합니다.

mutex를 실생활의 은유로 비유하자면, 한 마이크만 있는 컨퍼런스 패널 토론을 상상해보세요. 패널리스트가 발언하기 전에, 그들은 마이크를 사용하고 싶다고 요청하거나 신호를 보내야 합니다. 마이크를 받으면 원하는 만큼 이야기할 수 있고, 그런 후 발언을 요청하는 다음 패널리스트에게 마이크를 전달합니다. 만약 어떤 패널리스트가 발언을 마친 후 마이크를 넘기는 것을 잊는다면, 다른 사람들은 발언할 수 없게 됩니다. 공유 마이크 관리가 잘못되면 토론 자체가 계획대로 진행되지 않을 것입니다!

mutex 관리 작업은 올바르게 처리하기 매우 까다로울 수 있습니다. 이런 이유로 많은 사람들이 채널을 선호합니다. 하지만 Rust의 타입 시스템과 소유권 규칙 덕분에 락 및 언락을 잘못 처리하는 일이 발생하지 않습니다.