### 속성처럼 사용하는 매크로

속성처럼 사용하는 매크로(Attribute-like macros)는 커스텀 파생 매크로(custom derive macros)와 비슷하지만, `derive` 속성을 위한 코드를 생성하는 대신 새로운 속성을 만들 수 있게 합니다. 또한 더 유연합니다: `derive`는 구조체(structs)와 열거형(enums)에서만 작동하는 반면, 속성은 함수와 같은 다른 항목에도 적용할 수 있습니다. 다음은 속성처럼 사용하는 매크로를 사용하는 예입니다. 웹 애플리케이션 프레임워크를 사용할 때 함수에 주석을 달기 위해 `route`라는 속성을 가지고 있다고 가정해 봅시다:

```rust
    #[route(GET, "/")]
    fn index() {
```

이 `#[route]` 속성은 프레임워크에서 절차적 매크로(proc-macro)로 정의됩니다. 매크로 정의 함수의 시그니처는 다음과 같을 것입니다:

```rust
    #[proc_macro_attribute]
    pub fn route(attr: TokenStream, item: TokenStream) -> TokenStream {
```

여기서 두 개의 `TokenStream` 타입 매개변수가 있습니다. 첫 번째 매개변수는 속성의 내용(즉, `GET, "/"` 부분)을 나타냅니다. 두 번째 매개변수는 속성이 연결된 항목의 본문을 나타냅니다. 이 경우 `fn index() {}`와 함수 본문의 나머지 부분이 이에 해당합니다.

그 외의 사항에서는 속성처럼 사용하는 매크로가 커스텀 파생 매크로와 동일하게 작동합니다: `proc-macro` 크레이트 타입으로 크레이트를 생성하고, 생성하고자 하는 코드를 구현한 함수를 작성하면 됩니다!