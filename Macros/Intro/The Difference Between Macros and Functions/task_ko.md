### 매크로와 함수의 차이점

근본적으로, 매크로는 다른 코드를 작성하는 코드를 작성하는 방식으로, 이를 _메타프로그래밍_이라고 합니다. 부록 C에서는 다양한 트레이트를 자동으로 구현해주는 `derive` 속성을 다룹니다. 또한 이 책 전체에서 `println!` 및 `vec!` 매크로를 사용했습니다. 이러한 매크로는 모두 여러분이 수동으로 작성한 코드보다 더 많은 코드를 _확장_하여 생성합니다.

메타프로그래밍은 작성하고 유지 관리해야 하는 코드의 양을 줄이는 데 유용하며, 이는 함수의 역할 중 하나이기도 합니다. 하지만 매크로는 함수보다 추가적인 능력을 가지고 있습니다.

함수 시그니처는 함수가 갖는 매개변수의 개수와 타입을 선언해야 합니다. 반면에 매크로는 가변 개수의 매개변수를 받을 수 있습니다. 예를 들어, `println!("hello")`는 하나의 인수로 호출할 수 있고, `println!("hello {}", name)`은 두 개의 인수로 호출할 수 있습니다. 또한 매크로는 컴파일러가 코드의 의미를 해석하기 전에 확장되므로, 매크로는 예를 들어 특정 타입에 대해 트레이트를 구현할 수 있습니다. 함수는 런타임에 호출되고 트레이트는 컴파일 타임에 구현되어야 하기 때문에 이를 할 수 없습니다.

매크로를 함수 대신 구현할 때의 단점은 매크로 정의가 함수 정의보다 복잡하다는 점입니다. 매크로 정의는 Rust 코드를 작성하는 Rust 코드를 작성하기 때문에 이러한 간접성으로 인해 매크로 정의는 일반적으로 함수 정의보다 읽고 이해하며 유지 관리하기가 더 어렵습니다.

매크로와 함수의 또 다른 중요한 차이점은 매크로는 파일에서 호출하기 _전에_ 정의하거나 스코프로 가져와야 한다는 점입니다. 반면에 함수는 어디서든지 정의하고 호출할 수 있습니다.